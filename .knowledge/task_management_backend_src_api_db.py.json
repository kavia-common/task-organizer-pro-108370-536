{"is_source_file": true, "format": "Python", "description": "This file sets up database connectivity using SQLAlchemy ORM with async support and defines ORM models for a task management system, including User and Task classes, as well as functions for database initialization and session management.", "external_files": [".env"], "external_methods": ["load_dotenv", "os.getenv"], "published": ["get_db_session", "init_db"], "classes": [{"name": "Base", "description": "Base class for SQLAlchemy ORM models."}, {"name": "User", "description": "ORM model representing a user with attributes for email, name, password, activity status, and relationships to tasks."}, {"name": "Task", "description": "ORM model representing a task with attributes for title, description, due date, status, creator, assignee, timestamps, and relationships."}], "methods": [{"name": "get_db_session()", "description": "Provides an async database session for dependency injection, used per request.", "scope": "", "scopeKind": ""}, {"name": "init_db()", "description": "Creates database tables; intended for initial setup or migrations.", "scope": "", "scopeKind": ""}], "calls": ["load_dotenv", "os.getenv('POSTGRES_URL')", "create_async_engine", "async_sessionmaker", "DeclarativeBase", "func.now", "async with engine.begin()", "Base.metadata.create_all"], "search-terms": ["SQLAlchemy async models", "User and Task ORM classes", "database initialization functions", "async session management"], "state": 2, "file_id": 8, "knowledge_revision": 21, "git_revision": "", "ctags": [{"_type": "tag", "name": "Base", "path": "/home/kavia/workspace/code-generation/task-organizer-pro-108370-536/task_management_backend/src/api/db.py", "pattern": "/^class Base(DeclarativeBase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "DB_URL", "path": "/home/kavia/workspace/code-generation/task-organizer-pro-108370-536/task_management_backend/src/api/db.py", "pattern": "/^DB_URL = os.getenv('POSTGRES_URL')$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "Task", "path": "/home/kavia/workspace/code-generation/task-organizer-pro-108370-536/task_management_backend/src/api/db.py", "pattern": "/^class Task(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "User", "path": "/home/kavia/workspace/code-generation/task-organizer-pro-108370-536/task_management_backend/src/api/db.py", "pattern": "/^class User(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/task-organizer-pro-108370-536/task_management_backend/src/api/db.py", "pattern": "/^    __tablename__ = 'tasks'$/", "file": true, "language": "Python", "kind": "variable", "scope": "Task", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/task-organizer-pro-108370-536/task_management_backend/src/api/db.py", "pattern": "/^    __tablename__ = 'users'$/", "file": true, "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "assigned_tasks", "path": "/home/kavia/workspace/code-generation/task-organizer-pro-108370-536/task_management_backend/src/api/db.py", "pattern": "/^    assigned_tasks = relationship(\"Task\", back_populates=\"assignee\", foreign_keys=\"[Task.assigne/", "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "assignee", "path": "/home/kavia/workspace/code-generation/task-organizer-pro-108370-536/task_management_backend/src/api/db.py", "pattern": "/^    assignee = relationship($/", "language": "Python", "kind": "variable", "scope": "Task", "scopeKind": "class"}, {"_type": "tag", "name": "assignee_id", "path": "/home/kavia/workspace/code-generation/task-organizer-pro-108370-536/task_management_backend/src/api/db.py", "pattern": "/^    assignee_id = Column(Integer, ForeignKey(\"users.id\"), nullable=True)$/", "language": "Python", "kind": "variable", "scope": "Task", "scopeKind": "class"}, {"_type": "tag", "name": "async_session", "path": "/home/kavia/workspace/code-generation/task-organizer-pro-108370-536/task_management_backend/src/api/db.py", "pattern": "/^async_session = async_sessionmaker(engine, expire_on_commit=False, class_=AsyncSession)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/task-organizer-pro-108370-536/task_management_backend/src/api/db.py", "pattern": "/^    created_at = Column(DateTime(timezone=True), default=func.now(), nullable=False)$/", "language": "Python", "kind": "variable", "scope": "Task", "scopeKind": "class"}, {"_type": "tag", "name": "created_tasks", "path": "/home/kavia/workspace/code-generation/task-organizer-pro-108370-536/task_management_backend/src/api/db.py", "pattern": "/^    created_tasks = relationship(\"Task\", back_populates=\"creator\", foreign_keys=\"[Task.creator_i/", "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "creator", "path": "/home/kavia/workspace/code-generation/task-organizer-pro-108370-536/task_management_backend/src/api/db.py", "pattern": "/^    creator = relationship($/", "language": "Python", "kind": "variable", "scope": "Task", "scopeKind": "class"}, {"_type": "tag", "name": "creator_id", "path": "/home/kavia/workspace/code-generation/task-organizer-pro-108370-536/task_management_backend/src/api/db.py", "pattern": "/^    creator_id = Column(Integer, ForeignKey(\"users.id\"), nullable=False)$/", "language": "Python", "kind": "variable", "scope": "Task", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/task-organizer-pro-108370-536/task_management_backend/src/api/db.py", "pattern": "/^    description = Column(Text, nullable=True)$/", "language": "Python", "kind": "variable", "scope": "Task", "scopeKind": "class"}, {"_type": "tag", "name": "due_date", "path": "/home/kavia/workspace/code-generation/task-organizer-pro-108370-536/task_management_backend/src/api/db.py", "pattern": "/^    due_date = Column(Date, nullable=True)$/", "language": "Python", "kind": "variable", "scope": "Task", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/task-organizer-pro-108370-536/task_management_backend/src/api/db.py", "pattern": "/^    email = Column(String(255), unique=True, nullable=False, index=True)$/", "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "engine", "path": "/home/kavia/workspace/code-generation/task-organizer-pro-108370-536/task_management_backend/src/api/db.py", "pattern": "/^engine = create_async_engine(DB_URL, pool_pre_ping=True)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "full_name", "path": "/home/kavia/workspace/code-generation/task-organizer-pro-108370-536/task_management_backend/src/api/db.py", "pattern": "/^    full_name = Column(String(255), nullable=True)$/", "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "get_db_session", "path": "/home/kavia/workspace/code-generation/task-organizer-pro-108370-536/task_management_backend/src/api/db.py", "pattern": "/^async def get_db_session():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "hashed_password", "path": "/home/kavia/workspace/code-generation/task-organizer-pro-108370-536/task_management_backend/src/api/db.py", "pattern": "/^    hashed_password = Column(String(255), nullable=False)$/", "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/task-organizer-pro-108370-536/task_management_backend/src/api/db.py", "pattern": "/^    id = Column(Integer, primary_key=True, index=True)$/", "language": "Python", "kind": "variable", "scope": "Task", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/task-organizer-pro-108370-536/task_management_backend/src/api/db.py", "pattern": "/^    id = Column(Integer, primary_key=True, index=True)$/", "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "init_db", "path": "/home/kavia/workspace/code-generation/task-organizer-pro-108370-536/task_management_backend/src/api/db.py", "pattern": "/^async def init_db():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "is_active", "path": "/home/kavia/workspace/code-generation/task-organizer-pro-108370-536/task_management_backend/src/api/db.py", "pattern": "/^    is_active = Column(Boolean, default=True)$/", "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/task-organizer-pro-108370-536/task_management_backend/src/api/db.py", "pattern": "/^    status = Column(String(32), default='todo', nullable=False)$/", "language": "Python", "kind": "variable", "scope": "Task", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/task-organizer-pro-108370-536/task_management_backend/src/api/db.py", "pattern": "/^    title = Column(String(255), nullable=False)$/", "language": "Python", "kind": "variable", "scope": "Task", "scopeKind": "class"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/task-organizer-pro-108370-536/task_management_backend/src/api/db.py", "pattern": "/^    updated_at = Column(DateTime(timezone=True), default=func.now(), onupdate=func.now(), nullab/", "language": "Python", "kind": "variable", "scope": "Task", "scopeKind": "class"}], "hash": "c89bb7d2457b4f5e5b42d16ae5080f49", "format-version": 4, "code-base-name": "task_management_backend", "filename": "task_management_backend/src/api/db.py", "fields": [{"name": "DB_URL = os.getenv('POSTGRES_URL')", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "__tablename__ = 'tasks'", "scope": "Task", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = 'users'", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "assigned_tasks = relationship(\"Task\", back_populates=\"assignee\", foreign_keys=\"[Task.assigne/", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "assignee = relationship(", "scope": "Task", "scopeKind": "class", "description": "unavailable"}, {"name": "assignee_id = Column(Integer, ForeignKey(\"users.id\"), nullable=True)", "scope": "Task", "scopeKind": "class", "description": "unavailable"}, {"name": "async_session = async_sessionmaker(engine, expire_on_commit=False, class_=AsyncSession)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "created_at = Column(DateTime(timezone=True), default=func.now(), nullable=False)", "scope": "Task", "scopeKind": "class", "description": "unavailable"}, {"name": "created_tasks = relationship(\"Task\", back_populates=\"creator\", foreign_keys=\"[Task.creator_i/", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "creator = relationship(", "scope": "Task", "scopeKind": "class", "description": "unavailable"}, {"name": "creator_id = Column(Integer, ForeignKey(\"users.id\"), nullable=False)", "scope": "Task", "scopeKind": "class", "description": "unavailable"}, {"name": "description = Column(Text, nullable=True)", "scope": "Task", "scopeKind": "class", "description": "unavailable"}, {"name": "due_date = Column(Date, nullable=True)", "scope": "Task", "scopeKind": "class", "description": "unavailable"}, {"name": "email = Column(String(255), unique=True, nullable=False, index=True)", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "engine = create_async_engine(DB_URL, pool_pre_ping=True)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "full_name = Column(String(255), nullable=True)", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "hashed_password = Column(String(255), nullable=False)", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "id = Column(Integer, primary_key=True, index=True)", "scope": "Task", "scopeKind": "class", "description": "unavailable"}, {"name": "is_active = Column(Boolean, default=True)", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "status = Column(String(32), default='todo', nullable=False)", "scope": "Task", "scopeKind": "class", "description": "unavailable"}, {"name": "title = Column(String(255), nullable=False)", "scope": "Task", "scopeKind": "class", "description": "unavailable"}, {"name": "updated_at = Column(DateTime(timezone=True), default=func.now(), onupdate=func.now(), nullab/", "scope": "Task", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"21": ""}]}